language: android
sudo: false
os:
  - linux
jdk:
  - oraclejdk8
  - oraclejdk7
  - openjdk7
addons:
  apt:
    packages:
      - oracle-java8-installer
android:
  components:
    - tools
    - build-tools-25.0.0
    - platform-tools
    - extra-google-android-support
    - android-25
before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
# install:
#   - echo y | android update sdk -u -a -t tools
#   - echo y | android update sdk -u -a -t platform-tools
#   - echo y | android update sdk -u -a -t build-tools-25.0.2
#   - echo y | android update sdk -u -a -t android-25
before_script:
  - curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.1/install.sh | bash
  - nvm install 6
  - npm install -g npm
  - node --version
  - npm --version
  # - export TERM=dumb
  # # Approx. 3 seconds
  # - curl -L http://dl.google.com/android/ndk/android-ndk-r10e-linux-x86_64.bin -O
  # - chmod u+x android-ndk-r10e-linux-x86_64.bin
  # # Usually around 1 minute
  # - ./android-ndk-r10e-linux-x86_64.bin > /dev/null
  # - rm android-ndk-r10e-linux-x86_64.bin
  # - export ANDROID_NDK_HOME=`pwd`/android-ndk-r10e
  # - export LOCAL_ANDROID_NDK_HOME="$ANDROID_NDK_HOME"
  # - export LOCAL_ANDROID_NDK_HOST_PLATFORM="linux-x86_64"
  # - export PATH=$PATH:${ANDROID_NDK_HOME}
  # - env
  - echo $ANDROID_HOME
  - mkdir $ANDORID_HOME/licenses
  - ls -ls $ANDORID_HOME/licenses
  - echo -e "\n8933bad161af4178b1185d1a37fbf41ea5269c55" > "$ANDROID_HOME/licenses/android-sdk-license"
script:
  - npm install
